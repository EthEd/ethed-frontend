@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* Respect user motion preferences globally */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

body {
  font-family: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif;
}

h1, h2, h3 {
  font-family: var(--font-merriweather), serif;
  font-weight: 700;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-serif: var(--font-merriweather);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --radius: 0.5rem;
  --background: #f8fafb;
  --foreground: #0f172a;
  --card: #ffffff;
  --card-foreground: #0f172a;
  --popover: #ffffff;
  --popover-foreground: #0f172a;
  --primary: #0891b2;
  --primary-foreground: #ffffff;
  --secondary: #0d9488;
  --secondary-foreground: #ffffff;
  --accent: #e0f2fe;
  --accent-foreground: #0c4a6e;
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --muted: #f1f5f9;
  --muted-foreground: #64748b;
  --border: #e2e8f0;
  --input: #e2e8f0;
  --ring: #0891b2;
  --chart-1: #0891b2;
  --chart-2: #0d9488;
  --chart-3: #6366f1;
  --chart-4: #f59e0b;
  --chart-5: #ef4444;
  --sidebar: #ffffff;
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: #0891b2;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #f0fdfa;
  --sidebar-accent-foreground: #134e4a;
  --sidebar-border: #e2e8f0;
  --sidebar-ring: #0891b2;
}

.dark {
  --background: #0a0f1c;
  --foreground: #f1f5f9;
  --card: #111827;
  --card-foreground: #f1f5f9;
  --popover: #111827;
  --popover-foreground: #f1f5f9;
  --primary: #22d3ee;
  --primary-foreground: #0f172a;
  --secondary: #1e293b;
  --secondary-foreground: #f1f5f9;
  --accent: #1e293b;
  --accent-foreground: #f1f5f9;
  --destructive: #ef4444;
  --destructive-foreground: #f1f5f9;
  --muted: #1e293b;
  --muted-foreground: #94a3b8;
  --border: #1e3a5f;
  --input: #1e3a5f;
  --ring: #22d3ee;
  --chart-1: #22d3ee;
  --chart-2: #34d399;
  --chart-3: #a78bfa;
  --chart-4: #fbbf24;
  --chart-5: #f87171;
  --sidebar: #0f172a;
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: #22d3ee;
  --sidebar-primary-foreground: #0f172a;
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: #22d3ee;
}

@layer utilities {
  .shadow-cyan-glow {
    box-shadow: 0 20px 70px rgba(6, 182, 212, 0.12);
  }
  .shadow-emerald-glow {
    box-shadow: 0 20px 70px rgba(16, 185, 129, 0.12);
  }
}

/*
 * ─── GLOBAL THEME HARMONISATION ───
 *
 * The codebase uses hardcoded dark-mode Tailwind classes (bg-slate-950, bg-slate-900,
 * text-white, border-white/*, text-slate-300/400/500, etc.) across 250+ files.
 * Instead of editing every file, we remap these classes in light mode so the entire
 * site responds to the theme toggle automatically.
 *
 * In dark mode these resolve to their default Tailwind values.
 * In light mode they are overridden to the semantic light-mode equivalents.
 */

/* ── Page-level dark backgrounds → light backgrounds ── */
:root:not(.dark) .bg-slate-950 { background-color: var(--background) !important; }
:root:not(.dark) .bg-slate-950\/60 { background-color: color-mix(in srgb, var(--background) 60%, transparent) !important; }
:root:not(.dark) .bg-slate-950\/40 { background-color: color-mix(in srgb, var(--muted) 40%, transparent) !important; }

/* ── Card/component dark backgrounds → light card backgrounds ── */
:root:not(.dark) .bg-slate-900 { background-color: var(--card) !important; }
:root:not(.dark) .bg-slate-900\/90 { background-color: color-mix(in srgb, var(--card) 90%, transparent) !important; }
:root:not(.dark) .bg-slate-900\/80 { background-color: color-mix(in srgb, var(--card) 80%, transparent) !important; }
:root:not(.dark) .bg-slate-900\/60 { background-color: color-mix(in srgb, var(--card) 60%, transparent) !important; }
:root:not(.dark) .bg-slate-900\/50 { background-color: color-mix(in srgb, var(--card) 50%, transparent) !important; }
:root:not(.dark) .bg-slate-900\/40 { background-color: color-mix(in srgb, var(--card) 95%, var(--muted)) !important; }

/* ── Accent/muted dark backgrounds ── */
:root:not(.dark) .bg-slate-800 { background-color: var(--muted) !important; }
:root:not(.dark) .bg-slate-800\/50 { background-color: color-mix(in srgb, var(--muted) 50%, transparent) !important; }
:root:not(.dark) .bg-slate-800\/80 { background-color: color-mix(in srgb, var(--muted) 80%, transparent) !important; }

/* ── Black overlays — keep translucent, soften in light mode ── */
:root:not(.dark) .bg-black { background-color: var(--background) !important; }
:root:not(.dark) .bg-black\/90 { background-color: color-mix(in srgb, var(--card) 90%, transparent) !important; }
:root:not(.dark) .bg-black\/50 { background-color: rgba(0, 0, 0, 0.15) !important; }
:root:not(.dark) .bg-black\/40 { background-color: rgba(0, 0, 0, 0.1) !important; }
:root:not(.dark) .bg-black\/30 { background-color: rgba(0, 0, 0, 0.06) !important; }
:root:not(.dark) .bg-black\/20 { background-color: rgba(0, 0, 0, 0.04) !important; }

/* ── Text: white → dark foreground ── */
:root:not(.dark) .text-white { color: var(--foreground) !important; }

/* ── Text: slate grays → appropriate light-mode foregrounds ── */
:root:not(.dark) .text-slate-100 { color: var(--foreground) !important; }
:root:not(.dark) .text-slate-200 { color: var(--foreground) !important; }
:root:not(.dark) .text-slate-300 { color: color-mix(in srgb, var(--foreground) 80%, var(--muted-foreground)) !important; }
:root:not(.dark) .text-slate-400 { color: var(--muted-foreground) !important; }
:root:not(.dark) .text-slate-500 { color: color-mix(in srgb, var(--muted-foreground) 85%, transparent) !important; }
:root:not(.dark) .text-slate-600 { color: color-mix(in srgb, var(--muted-foreground) 70%, transparent) !important; }

/* ── Borders: white opacity → proper light borders ── */
:root:not(.dark) .border-white\/10 { border-color: var(--border) !important; }
:root:not(.dark) .border-white\/5 { border-color: color-mix(in srgb, var(--border) 50%, transparent) !important; }
:root:not(.dark) .border-white\/20 { border-color: var(--border) !important; }
:root:not(.dark) .border-slate-700 { border-color: var(--border) !important; }
:root:not(.dark) .border-slate-600 { border-color: var(--border) !important; }
:root:not(.dark) .border-slate-600\/30 { border-color: color-mix(in srgb, var(--border) 60%, transparent) !important; }
:root:not(.dark) .border-slate-200\/20 { border-color: var(--border) !important; }

/* ── Backgrounds with white opacity → light equivalents ── */
:root:not(.dark) .bg-white\/5 { background-color: color-mix(in srgb, var(--muted) 40%, transparent) !important; }
:root:not(.dark) .bg-white\/10 { background-color: color-mix(in srgb, var(--muted) 60%, transparent) !important; }
:root:not(.dark) .bg-white\/\[0\.02\] { background-color: color-mix(in srgb, var(--muted) 20%, transparent) !important; }
:root:not(.dark) .bg-white\/\[0\.03\] { background-color: color-mix(in srgb, var(--muted) 25%, transparent) !important; }

/* ── From/to gradient stops for dark gradients ── */
:root:not(.dark) .from-slate-900 { --tw-gradient-from: var(--card) !important; }
:root:not(.dark) .from-slate-900\/90 { --tw-gradient-from: color-mix(in srgb, var(--card) 90%, transparent) !important; }
:root:not(.dark) .to-slate-800 { --tw-gradient-to: var(--muted) !important; }
:root:not(.dark) .to-slate-800\/90 { --tw-gradient-to: color-mix(in srgb, var(--muted) 90%, transparent) !important; }
:root:not(.dark) .from-slate-950 { --tw-gradient-from: var(--background) !important; }
:root:not(.dark) .to-slate-950 { --tw-gradient-to: var(--background) !important; }
:root:not(.dark) .via-slate-950 { --tw-gradient-via: var(--background) !important; }
:root:not(.dark) .via-slate-900 { --tw-gradient-via: var(--card) !important; }
:root:not(.dark) .via-slate-800 { --tw-gradient-via: var(--muted) !important; }

/* ── Hover states ── */
:root:not(.dark) .hover\:bg-white\/5:hover { background-color: color-mix(in srgb, var(--muted) 50%, transparent) !important; }
:root:not(.dark) .hover\:bg-white\/10:hover { background-color: color-mix(in srgb, var(--muted) 70%, transparent) !important; }
:root:not(.dark) .hover\:text-white:hover { color: var(--foreground) !important; }

/* ── Divide colors ── */
:root:not(.dark) .divide-white\/10 > :not([hidden]) ~ :not([hidden]) { border-color: var(--border) !important; }

/* ── Ring colors ── */
:root:not(.dark) .ring-white\/10 { --tw-ring-color: var(--border) !important; }
:root:not(.dark) .ring-white\/20 { --tw-ring-color: var(--border) !important; }

/* ── Placeholder text ── */
:root:not(.dark) .placeholder\:text-slate-500::placeholder { color: var(--muted-foreground) !important; }

/* ── Ensure the global grid is less visible in light mode ── */
:root:not(.dark) canvas[class*="fixed"] {
  opacity: 0.4 !important;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
